<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SyndicApp.Mobile.Views.Affectations.AffectationCreatePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:layout="clr-namespace:SyndicApp.Mobile.Views.Layout"
    xmlns:vm="clr-namespace:SyndicApp.Mobile.ViewModels.Affectations"
    Title="Nouvelle affectation"
    Shell.NavBarIsVisible="False"
    BackgroundColor="White">

    <layout:RoleDrawerLayout>
        <layout:RoleDrawerLayout.MainContent>

            <ScrollView>
                <VerticalStackLayout Padding="16"
                                     Spacing="16">

                    <Label Text="Nouvelle affectation"
                           FontSize="22"
                           FontAttributes="Bold" />

                    <!-- Utilisateur -->
<VerticalStackLayout Spacing="4">
    <Label Text="Utilisateur"
           FontSize="12"
           TextColor="#6B7280" />
    <Picker ItemsSource="{Binding Users}"
            ItemDisplayBinding="{Binding Label}"
            SelectedItem="{Binding SelectedUser}"
            Title="Choisir un utilisateur"
            TextColor="White"
            BackgroundColor="#2563EB" />
</VerticalStackLayout>


                    <!-- Lot -->
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Lot"
                               FontSize="12"
                               TextColor="#6B7280" />
                        <Picker ItemsSource="{Binding Lots}"
                                ItemDisplayBinding="{Binding NumeroLot}"
                                SelectedItem="{Binding SelectedLot}"
                                Title="Choisir un lot"
                                TextColor="White"
                                BackgroundColor="#2563EB" />
                    </VerticalStackLayout>

                    <!-- Dates -->
                    <Grid ColumnDefinitions="*,*"
                          ColumnSpacing="12">
                        <VerticalStackLayout Grid.Column="0"
                                             Spacing="4">
                            <Label Text="Date de début"
                                   FontSize="12"
                                   TextColor="#6B7280" />
                            <DatePicker Date="{Binding DateDebut}" />
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1"
                                             Spacing="4">
                            <Label Text="Date de fin (optionnelle)"
                                   FontSize="12"
                                   TextColor="#6B7280" />
                            <DatePicker Date="{Binding DateFin}"
                                        IsEnabled="{Binding HasDateFin}" />
                        </VerticalStackLayout>
                    </Grid>

                    <!-- Propriétaire -->
                    <Grid ColumnDefinitions="Auto,*"
                          Margin="0,8,0,0">
                        <Label Grid.Column="0"
                               Text="Propriétaire"
                               VerticalOptions="Center" />
                        <Switch Grid.Column="1"
                                HorizontalOptions="Start"
                                IsToggled="{Binding EstProprietaire}" />
                    </Grid>

                    <!-- Boutons -->
                    <Grid ColumnDefinitions="*,*"
                          Margin="0,24,0,0"
                          ColumnSpacing="12">
                        <Button Grid.Column="0"
                                Text="Annuler"
                                BackgroundColor="Transparent"
                                TextColor="#2563EB"
                                BorderColor="#2563EB"
                                BorderWidth="1"
                                CornerRadius="10"
                                Padding="14,10"
                                Clicked="OnCancelClicked" />

                        <Button Grid.Column="1"
                                Text="Enregistrer"
                                BackgroundColor="#2563EB"
                                TextColor="White"
                                CornerRadius="10"
                                Padding="14,10"
                                Clicked="OnSaveClicked" />
                    </Grid>

                </VerticalStackLayout>
            </ScrollView>

        </layout:RoleDrawerLayout.MainContent>
    </layout:RoleDrawerLayout>
</ContentPage>
