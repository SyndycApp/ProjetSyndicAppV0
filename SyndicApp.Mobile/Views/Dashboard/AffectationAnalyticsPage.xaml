<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SyndicApp.Mobile.Views.Dashboard.AffectationAnalyticsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:mc="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
    xmlns:layout="clr-namespace:SyndicApp.Mobile.Views.Layout"
    Title="Statistiques affectations"
    Shell.NavBarIsVisible="False"
    BackgroundColor="White">

    <layout:RoleDrawerLayout x:Name="DrawerLayout">

        <layout:RoleDrawerLayout.MainContent>

            <ScrollView Padding="16">
                <VerticalStackLayout Spacing="16">

                    <!-- Bouton retour -->
                    <Button Text="←"
                            FontSize="22"
                            BackgroundColor="Transparent"
                            TextColor="Black"
                            Clicked="Back_Clicked" />

                    <Label Text="Statistiques des affectations"
                           FontSize="22"
                           FontAttributes="Bold"
                           Margin="0,0,0,10"/>

                    <!-- Carte 1 -->
                    <Frame CornerRadius="14"
                           BorderColor="#E5E7EB"
                           HasShadow="False"
                           Padding="14">
                        <VerticalStackLayout>
                            <Label Text="Créations par mois"
                                   FontAttributes="Bold"/>
                            <mc:ChartView HeightRequest="180"
                                          Chart="{Binding CreatedPerMonthChart}"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Carte 2 -->
                    <Frame CornerRadius="14"
                           BorderColor="#E5E7EB"
                           HasShadow="False"
                           Padding="14">
                        <VerticalStackLayout>
                            <Label Text="Durée moyenne (jours)" FontAttributes="Bold"/>
                            <Label Text="{Binding AvgDurationDays}"
                                   FontSize="22"
                                   FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Carte 3 -->
                    <Frame CornerRadius="14"
                           BorderColor="#E5E7EB"
                           HasShadow="False"
                           Padding="14">
                        <VerticalStackLayout>
                            <Label Text="Rotation des lots (par an)"
                                   FontAttributes="Bold"/>
                            <mc:ChartView HeightRequest="180"
                                          Chart="{Binding LotRotationChart}"/>
                        </VerticalStackLayout>
                    </Frame>

                </VerticalStackLayout>
            </ScrollView>

        </layout:RoleDrawerLayout.MainContent>
    </layout:RoleDrawerLayout>
</ContentPage>
