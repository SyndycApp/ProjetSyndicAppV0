<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SyndicApp.Mobile.Views.Dashboard.AffectationDashboardPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:layout="clr-namespace:SyndicApp.Mobile.Views.Layout"
    xmlns:mc="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
    Shell.NavBarIsVisible="False"
    BackgroundColor="White">

    <layout:RoleDrawerLayout x:Name="DrawerLayout">

        <layout:RoleDrawerLayout.MainContent>

            <ScrollView Padding="16">
                <VerticalStackLayout Spacing="12">

                    <!-- KPIs -->
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="12">

                        <Frame Style="{StaticResource Card}">
                            <VerticalStackLayout>
                                <Label Text="Lots total"/>
                                <Label Text="{Binding TotalLots}" Style="{StaticResource KpiNumber}" />
                            </VerticalStackLayout>
                        </Frame>

                        <Frame Style="{StaticResource Card}">
                            <VerticalStackLayout>
                                <Label Text="Affectations actives"/>
                                <Label Text="{Binding Actives}" Style="{StaticResource KpiNumber}" />
                            </VerticalStackLayout>
                        </Frame>

                        <Frame Grid.Row="1" Style="{StaticResource Card}">
                            <VerticalStackLayout>
                                <Label Text="Clôturées"/>
                                <Label Text="{Binding Closed}" Style="{StaticResource KpiNumber}" />
                            </VerticalStackLayout>
                        </Frame>

                        <Frame Grid.Row="1" Grid.Column="1" Style="{StaticResource Card}">
                            <VerticalStackLayout>
                                <Label Text="Taux d’occupation"/>
                                <Label Text="{Binding OccupancyRateText}" Style="{StaticResource KpiNumber}" />
                            </VerticalStackLayout>
                        </Frame>

                    </Grid>

                    <!-- Pie Chart -->
                    <Frame Style="{StaticResource Card}">
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                            <VerticalStackLayout>
                                <Label Text="Répartition" FontAttributes="Bold"/>
                                <Label Text="Propriétaires vs Locataires" Opacity="0.6"/>
                            </VerticalStackLayout>
                            <mc:ChartView Grid.Column="1"
                                          HeightRequest="140"
                                          Chart="{Binding OwnersVsTenantsChart}" />
                        </Grid>
                    </Frame>

                </VerticalStackLayout>
            </ScrollView>

        </layout:RoleDrawerLayout.MainContent>

    </layout:RoleDrawerLayout>

</ContentPage>
