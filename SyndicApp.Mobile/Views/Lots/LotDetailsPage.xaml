<?xml version="1.0" encoding="utf-8"?>
<ContentPage x:Class="SyndicApp.Mobile.Views.Lots.LotDetailsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Shell.NavBarIsVisible="False"
             Title="Detail Lot"
             BackgroundColor="White">

  <ContentPage.Resources>
    <Color x:Key="TopbarColor">#2563EB</Color>
    <Color x:Key="HeaderTextOnDark">#FFFFFF</Color>
    <Color x:Key="BodyText">#111827</Color>
    <Style TargetType="Label"><Setter Property="TextColor" Value="{StaticResource BodyText}"/></Style>
  </ContentPage.Resources>

  <Grid x:Name="Root" RowDefinitions="Auto,*">
    <Grid BackgroundColor="{StaticResource TopbarColor}" Padding="12,8">
      <Grid.ColumnDefinitions><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
      <Button Grid.Column="0" Text="&#x2630;" FontSize="22" BackgroundColor="Transparent" TextColor="{StaticResource HeaderTextOnDark}" Clicked="OpenDrawer_Clicked"/>
      <Label Grid.Column="1" Text="Detail Lot" HorizontalTextAlignment="Center" VerticalOptions="Center" FontAttributes="Bold" TextColor="{StaticResource HeaderTextOnDark}"/>
      <Label Grid.Column="2" Text="&#x2022; &#x2022; &#x2022;" TextColor="{StaticResource HeaderTextOnDark}" VerticalOptions="Center"/>
    </Grid>

    <ScrollView Grid.Row="1">
      <VerticalStackLayout Padding="16" Spacing="12">
        <Label Text="{Binding Lot.NumeroLot}" FontSize="20" FontAttributes="Bold"/>
        <Label Text="{Binding Lot.Type}" TextColor="#374151"/>
        <Label Text="{Binding Lot.BatimentNom}" TextColor="#374151"/>

        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10" Margin="0,12,0,0">
          <Button Text="Modifier" Command="{Binding EditCommand}"/>
          <Button Grid.Column="1" Text="Supprimer" TextColor="Red" Command="{Binding DeleteCommand}"/>
          <Button Grid.Column="2" Text="Retour" Clicked="Back_Clicked"/>
        </Grid>
      </VerticalStackLayout>
    </ScrollView>

    <BoxView x:Name="Backdrop" Grid.RowSpan="2" BackgroundColor="#66000000" Opacity="0" InputTransparent="True">
      <BoxView.GestureRecognizers><TapGestureRecognizer Tapped="Backdrop_Tapped"/></BoxView.GestureRecognizers>
    </BoxView>

    <Border x:Name="Drawer" Grid.RowSpan="2" BackgroundColor="White" StrokeThickness="0" TranslationX="-1000" Padding="0">
      <Grid RowDefinitions="Auto,*">
        <Grid BackgroundColor="{StaticResource TopbarColor}" Padding="16">
          <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
          <Label Text="Navigation" TextColor="{StaticResource HeaderTextOnDark}" FontAttributes="Bold" VerticalOptions="Center"/>
          <Button Grid.Column="1" Text="&#x2192;" BackgroundColor="Transparent" TextColor="{StaticResource HeaderTextOnDark}" Clicked="CloseDrawer_Clicked"/>
        </Grid>
        <ScrollView Grid.Row="1" BackgroundColor="White">
          <VerticalStackLayout Padding="16" Spacing="10">
            <Label Text="Tableau de bord" FontAttributes="Bold"/>
            <Button Text="Dashboard" Style="{StaticResource MenuButtonStyle}" CommandParameter="//syndic-dashboard" Clicked="OnMenuItemClicked"/>
            <BoxView HeightRequest="16" Opacity="0"/>
            <Button Text="Deconnexion" Style="{StaticResource LogoutButtonStyle}" CommandParameter="//login" Clicked="OnMenuItemClicked"/>
          </VerticalStackLayout>
        </ScrollView>
      </Grid>
    </Border>
  </Grid>
</ContentPage>
