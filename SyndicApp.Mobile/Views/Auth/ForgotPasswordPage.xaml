<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:SyndicApp.Mobile.ViewModels.Auth"
    x:Class="SyndicApp.Mobile.Views.Auth.ForgotPasswordPage"
    x:DataType="vm:ForgotPasswordViewModel"
    Shell.NavBarIsVisible="False"
    BackgroundColor="#F4F6F8">

    <Grid Padding="20">
        <Border HorizontalOptions="Center"
                VerticalOptions="Center"
                WidthRequest="360"
                StrokeThickness="0"
                BackgroundColor="White"
                Padding="24"
                StrokeShape="RoundRectangle 16">
            <Border.Shadow>
                <Shadow Brush="#40000000" Radius="12"/>
            </Border.Shadow>

            <VerticalStackLayout Spacing="16">

                <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                    <Image Source="logo.png" WidthRequest="64" HeightRequest="64" Aspect="AspectFit"/>
                    <Label Text="Mot de passe oublié" FontSize="22" FontAttributes="Bold" TextColor="#1C1C1E"/>
                </VerticalStackLayout>

                <Label Text="Entrez votre email et nous vous enverrons un lien pour reinitialiser votre mot de passe."
                       FontSize="13" TextColor="#6B7280"
                       HorizontalTextAlignment="Center"
                       LineBreakMode="WordWrap"/>

                <Border StrokeShape="RoundRectangle 8" BackgroundColor="#FFFFFF" Padding="12">
                    <Entry Placeholder="Email"
                           Text="{Binding Email}"
                           Keyboard="Email"
                           TextColor="Black"
                           BackgroundColor="Transparent"/>
                </Border>

                <Button Text="Envoyer"
                        Command="{Binding SendResetCommand}"
                        HeightRequest="48"
                        FontAttributes="Bold"
                        TextColor="White"
                        BackgroundColor="#1E63E9"
                        CornerRadius="12"/>

                <HorizontalStackLayout HorizontalOptions="Center" Spacing="6" Margin="0,4,0,0">
                    <Label Text="Se souvenir de votre mot de passe ?" TextColor="#6B7280" />
                    <Label Text="Connexion" TextColor="#1E63E9" FontAttributes="Bold">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoToLoginCommand}" />
                        </Label.GestureRecognizers>
                    </Label>
                </HorizontalStackLayout>

                <!-- Bandeau d’erreur -->
                <Border BackgroundColor="#FDECEA"
                        StrokeThickness="0"
                        Padding="10"
                        StrokeShape="RoundRectangle 8"
                        IsVisible="{Binding HasError}">
                    <Label Text="{Binding ErrorMessage}" TextColor="#B3261E" FontSize="13"/>
                </Border>

                <ActivityIndicator IsRunning="{Binding IsBusy}" IsVisible="{Binding IsBusy}" Color="#1E63E9"/>
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>
