<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SyndicApp.Mobile.Views.Personnel.PrestataireDetailsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:SyndicApp.Mobile.ViewModels.Personnel"
    xmlns:layout="clr-namespace:SyndicApp.Mobile.Views.Layout"
    x:DataType="vm:PrestataireDetailsViewModel"
    Shell.NavBarIsVisible="False"
    BackgroundColor="White">

    <layout:RoleDrawerLayout x:Name="DrawerLayout">

        <layout:RoleDrawerLayout.MainContent>

            <ScrollView>
                <VerticalStackLayout Padding="16" Spacing="16">

                    <!-- HEADER : flèche + titre -->
                    <Grid ColumnDefinitions="Auto,*"
                          VerticalOptions="Center"
                          Padding="0,0,0,8">

                        <!-- Flèche retour -->
                        <Button Text="←"
                                FontSize="22"
                                BackgroundColor="Transparent"
                                TextColor="Black"
                                Clicked="Back_Clicked"
                                Padding="0"
                                HorizontalOptions="Start"
                                VerticalOptions="Center" />

                        <!-- Titre -->
                        <Label Text="Détails prestataire"
                               Grid.Column="1"
                               FontSize="22"
                               FontAttributes="Bold"
                               VerticalOptions="Center"
                               Margin="12,0,0,0" />
                    </Grid>

                    <ActivityIndicator IsRunning="{Binding IsBusy}"
                                       IsVisible="{Binding IsBusy}" />

                    <!-- INFOS PRESTATAIRE -->
                    <Frame CornerRadius="14"
                           Padding="14"
                           BorderColor="#E5E7EB">
                        <VerticalStackLayout Spacing="6">
                            <Label Text="{Binding Item.Nom}"
                                   FontSize="20"
                                   FontAttributes="Bold" />
                            <Label Text="{Binding Item.TypeService}" Opacity="0.7" />
                            <Label Text="{Binding Item.Email}" Opacity="0.8" />
                            <Label Text="{Binding Item.Telephone}" Opacity="0.8" />
                            <Label Text="{Binding Item.Adresse}" Opacity="0.8" />
                        </VerticalStackLayout>
                    </Frame>

                    <!-- ACTIONS -->
                    <Frame CornerRadius="14"
                           Padding="14"
                           BorderColor="#E5E7EB">
                        <VerticalStackLayout Spacing="10">

                            <Label Text="Actions"
                                   FontAttributes="Bold" />

                            <Button Text="Créer un compte de connexion"
                                    BackgroundColor="#2563EB"
                                    TextColor="White"
                                    CornerRadius="10"
                                    Padding="12,8"
                                    Command="{Binding CreateAccountCommand}"
                                    IsEnabled="{Binding CanCreateAccount}" />

                            <Button Text="Supprimer ce prestataire"
                                    BackgroundColor="#DC2626"
                                    TextColor="White"
                                    CornerRadius="10"
                                    Padding="12,8"
                                    Command="{Binding DeleteCommand}" />
                        </VerticalStackLayout>
                    </Frame>

                </VerticalStackLayout>
            </ScrollView>

        </layout:RoleDrawerLayout.MainContent>
    </layout:RoleDrawerLayout>
</ContentPage>
