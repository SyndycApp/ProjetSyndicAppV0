@page "/"
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject NavigationManager Navigation

<h3>Bienvenue dans votre application</h3>
<p>Ceci est la page d'accueil visible uniquement après connexion.</p>

<button class="btn btn-danger" @onclick="Logout">Déconnexion</button>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Pour tester, force la redirection vers /residences sans condition
        Navigation.NavigateTo("/residences", true);
    }

    private async Task Logout()
    {
        await localStorage.RemoveItemAsync("authToken");
        Navigation.NavigateTo("/login", true);
    }
}
